# ๐๏ธ ุฏููู ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Initialization Guide

## ๐ฏ ุงููุดููุฉ
ุนูุฏ ูุชุญ ุงููุดุฑูุนุ ูุง ุชุธูุฑ ุฃู ุจูุงูุงุช ูุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุฑุบุฉ!

## โ ุงูุญู
ูููุง ุจุฅูุดุงุก ุณูุฑูุจุช ูุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุถุงูุฉ ุจูุงูุงุช ุฃูููุฉ.

---

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ

### ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ูุชุบูุฑ ุจูุฆุฉ ูู Railway

1. **ุงุฐูุจ ุฅูู:** https://railway.app/dashboard
2. **ุงูุชุญ ุงููุดุฑูุน:** quality_rounds
3. **ุงุถุบุท ุนูู:** Variables (ูู ุงููุงุฆูุฉ ุงููุณุฑู)
4. **ุงุถุบุท:** + New Variable
5. **ุฃุถู:**
   ```
   Name: INIT_DATABASE
   Value: true
   ```
6. **ุงุถุบุท:** Add

### ุงูุฎุทูุฉ 2: ุงูุชุธุฑ ุฅุนุงุฏุฉ ุงูุจูุงุก

- Railway ุณูุนูุฏ ุชุดุบูู ุงููุดุฑูุน ุชููุงุฆูุงู
- ุณูุณุชุบุฑู ~30-60 ุซุงููุฉ
- ุงูุณูุฑูุจุช ุณูููู ุจู:
  - โ ุฅูุดุงุก ุฌููุน ุงูุฌุฏุงูู
  - โ ุฅุถุงูุฉ ูุณุชุฎุฏููู ุงูุชุฑุงุถููู
  - โ ุฅุถุงูุฉ ุฃูุณุงู ุงูุชุฑุงุถูุฉ
  - โ ุฅุถุงูุฉ ุฃููุงุน ุงูุฌููุงุช
  - โ ุฅุถุงูุฉ ูุฆุงุช ุงูุชูููู

### ุงูุฎุทูุฉ 3: ุชุญูู ูู ุงูุณุฌูุงุช

1. ูู Railwayุ ุงุฐูุจ ุฅูู: **Logs**
2. ุงุจุญุซ ุนู:
   ```
   ๐ Database Initialization Script
   โ Tables created successfully!
   โ Users created: 4
   โ Departments created: 11
   โ Round types created: 5
   โ Evaluation categories created: 5
   ๐ Database initialization completed successfully!
   ```

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุฑ ุงููุดุฑูุน

ุงูุชุญ ุงููุชุตูุญ:
```
https://qpsrounds-production.up.railway.app
```

ุณุฌู ุฏุฎูู ุจู:
```
Username: admin
Password: admin123
```

**ูุฌุจ ุฃู ุชุฑู:**
- โ Dashboard ูุน ุจูุงูุงุช
- โ ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- โ ูุงุฆูุฉ ุงูุฃูุณุงู
- โ ุฃููุงุน ุงูุฌููุงุช

---

## ๐ ุจูุงูุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ

### 1. ูุฏูุฑ ุงููุธุงู (Admin)
```
Username: admin
Password: admin123
Role: ADMIN
```

### 2. ูุฏูุฑ ุงูุฌูุฏุฉ
```
Username: quality_manager
Password: quality123
Role: QUALITY_MANAGER
```

### 3. ุงููููู
```
Username: assessor1
Password: assessor123
Role: ASSESSOR
```

### 4. ูุฏูุฑ ุงููุณู
```
Username: department_manager
Password: dept123
Role: DEPARTMENT_MANAGER
```

---

## ๐ ุงูุจูุงูุงุช ุงูุชู ุณูุชู ุฅูุดุงุคูุง

### ุงูุฌุฏุงูู:
1. users
2. departments
3. rounds
4. capas
5. evaluation_categories
6. evaluation_items
7. evaluation_results
8. round_types
9. notifications
10. audit_logs
11. user_notification_settings
12. objective_options
13. capa_dashboard_stats

### ุงููุณุชุฎุฏููู (4):
- admin
- quality_manager
- assessor1
- department_manager

### ุงูุฃูุณุงู (11):
- ุงูุทูุงุฑุฆ
- ุงูุนูููุงุช
- ุงูุนูุงูุฉ ุงููุฑูุฒุฉ
- ุงูุฃุทูุงู
- ุงููุณุงุก ูุงูููุงุฏุฉ
- ุงูุจุงุทููุฉ
- ุงูุฌุฑุงุญุฉ
- ุงูุนุธุงู
- ุงูุฃุดุนุฉ
- ุงููุฎุชุจุฑ
- ุงูุตูุฏููุฉ

### ุฃููุงุน ุงูุฌููุงุช (5):
- ุฌููุฉ ุฑูุชูููุฉ
- ุฌููุฉ ุทุงุฑุฆุฉ
- ุฌููุฉ ูุชุงุจุนุฉ
- ุฌููุฉ ููููุฉ
- ุชุฏููู ุฏุงุฎูู

### ูุฆุงุช ุงูุชูููู (5):
- ุณูุงูุฉ ุงููุฑุถู (30%)
- ููุงูุญุฉ ุงูุนุฏูู (25%)
- ุฅุฏุงุฑุฉ ุงูุฃุฏููุฉ (20%)
- ุงููุซุงุฆู ุงูุทุจูุฉ (15%)
- ุงูุจูุฆุฉ ูุงููุนุฏุงุช (10%)

---

## ๐ ุฅุนุงุฏุฉ ุงูุชููุฆุฉ (ุฅุฐุง ูุฒู)

ุฅุฐุง ุงุญุชุฌุช ุฅุนุงุฏุฉ ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### ุงูุทุฑููุฉ 1: ูู Railway
1. ูู Railway Variablesุ ุบููุฑ `INIT_DATABASE` ุฅูู `false`
2. ุงุญุฐู ุฌููุน ุงูุฌุฏุงูู ูู Neon
3. ุบููุฑ `INIT_DATABASE` ุฅูู `true` ูุฑุฉ ุฃุฎุฑู

### ุงูุทุฑููุฉ 2: ูุญููุงู
```bash
# ูู Terminal
cd /Users/salehalzaid/Documents/massdeigners/salamah_rounds
bash init_prod_db.sh
```

**ููุงุญุธุฉ:** ูุฌุจ ุฃู ุชููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุชุดูุฑ ุฅูู Neon Production Database.

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุณูุฑูุจุช ูู ูุดุชุบู

**ุงูุชุญูู:**
1. ูู Railway Logsุ ุงุจุญุซ ุนู: "Initializing database"
2. ุฅุฐุง ูู ุชุฌุฏูุงุ ุชุฃูุฏ ูู:
   - โ `INIT_DATABASE=true` ูู Variables
   - โ Railway ุฃุนุงุฏ ุงูุจูุงุก ุจุนุฏ ุฅุถุงูุฉ ุงููุชุบูุฑ

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู Deployments
2. ุงุถุบุท Redeploy

---

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุฃุนุฑุงุถ:**
```
Database connection failed
```

**ุงูุญู:**
1. ุชุญูู ูู `DATABASE_URL` ูู Railway Variables
2. ุชุฃูุฏ ูู ุตุญุฉ ุงูุฑุงุจุท ูู Neon Console
3. ุชุฃูุฏ ูู ุฃู Database ูู Neon ูุดุทุฉ (Active)

**ุงูุฑุงุจุท ุงูุตุญูุญ:**
```
postgresql://neondb_owner:npg_ERS5fHwxWiu2@ep-lingering-morning-adejreab-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
```

---

### ุงููุดููุฉ: ุจูุงูุงุช ููุฑุฑุฉ

**ุงูุฃุนุฑุงุถ:**
```
UNIQUE constraint failed
```

**ุงูุณุจุจ:**
ุงูุณูุฑูุจุช ูุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ูุจู ุงูุฅุถุงูุฉุ ููู ุฅุฐุง ูุงูุช ููุงู ุจูุงูุงุช ุฌุฒุฆูุฉ ูุฏ ุชุญุฏุซ ูุดุงูู.

**ุงูุญู:**
1. ุงุญุฐู ุงูุจูุงูุงุช ุงูููุฑุฑุฉ ูู Neon
2. ุฃู ุฃุนุฏ ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุฉ

---

## ๐ฏ ุจุนุฏ ุงูุชููุฆุฉ ุงููุงุฌุญุฉ

### ุฎุทูุฉ 1: ุฃููู ุงูุชููุฆุฉ ุงูุชููุงุฆูุฉ

ุจุนุฏ ูุฌุงุญ ุงูุชููุฆุฉุ ููุถู ุฅููุงููุง ูุชุณุฑูุน ุงูุจูุงุก:

1. ูู Railway Variables
2. ุบููุฑ `INIT_DATABASE` ูู `true` ุฅูู `false`
3. ุฃู ุงุญุฐู ุงููุชุบูุฑ ุชูุงูุงู

**ููุงุฐุงุ**
- ูุชุณุฑูุน ุนูููุฉ ุงูุจูุงุก ูู ุงููุณุชูุจู
- ุงูุณูุฑูุจุช ูุชุญูู ูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ููู ููุฑุฑ ุงูุฅุถุงูุฉ

---

### ุฎุทูุฉ 2: ุบููุฑ ูููุงุช ุงููุฑูุฑ

โ๏ธ **ููู ุฌุฏุงู!**

ุจุนุฏ ุฃูู ุชุณุฌูู ุฏุฎูู:
1. ุณุฌู ุฏุฎูู ูู admin
2. ุงุฐูุจ ุฅูู ุงูุฅุนุฏุงุฏุงุช
3. ุบููุฑ ูููุฉ ูุฑูุฑ admin
4. ุฃูุดุฆ ูุณุชุฎุฏููู ุฌุฏุฏ ุจูููุงุช ูุฑูุฑ ูููุฉ

---

### ุฎุทูุฉ 3: ุงุจุฏุฃ ุงูุงุณุชุฎุฏุงู

ุงูุขู ููููู:
- โ ุฅูุดุงุก ุฌููุงุช ุฌุฏูุฏุฉ
- โ ุฅุถุงูุฉ CAPAs
- โ ุชูููู ุงูุฃูุณุงู
- โ ุฅูุดุงุก ุชูุงุฑูุฑ
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. **ุฑุงุฌุน Logs ูู Railway:**
   - ุงุฐูุจ ุฅูู Logs
   - ุงุจุญุซ ุนู ERROR
   - ุงูุณุฎ ุฑุณุงูุฉ ุงูุฎุทุฃ

2. **ุงุฎุชุจุฑ ุงูุงุชุตุงู:**
   ```bash
   curl https://qpsrounds-production.up.railway.app/health
   ```

3. **ุฃุฎุจุฑูู:**
   - ุงูุณุฎ ุฑุณุงูุฉ ุงูุฎุทุฃ ูู Logs
   - ุฃุฎุจุฑูู ุจูุง ุญุฏุซ
   - ุณุฃุณุงุนุฏู ููุฑุงู!

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ุจุนุฏ ุงูุชููุฆุฉุ ุชุฃูุฏ ูู:

- [ ] `INIT_DATABASE=true` ูู Railway Variables
- [ ] Railway ุฃุนุงุฏ ุงูุจูุงุก
- [ ] "Database initialization completed" ูู Logs
- [ ] ูููู ุชุณุฌูู ุงูุฏุฎูู ุจู admin/admin123
- [ ] ุชุธูุฑ ุงูุฃูุณุงู ูู ุงููุงุฆูุฉ
- [ ] ุชุธูุฑ ุฃููุงุน ุงูุฌููุงุช
- [ ] ูููู ุฅูุดุงุก ุฌููุฉ ุฌุฏูุฏุฉ
- [ ] ุชู ุชุบููุฑ ูููุฉ ูุฑูุฑ admin

---

**๐ ุจุนุฏ ุงูุชูุงู ุฌููุน ุงูุฎุทูุงุชุ ูุดุฑูุนู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุงููุงูู!**

---

ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู: 6 ุฃูุชูุจุฑ 2025

