# ุชูุนูู ุฏุงุดุจูุฑุฏ ุงูุฎุทุท ุงูุชุตุญูุญูุฉ (CAPA Dashboard)

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฏุงุดุจูุฑุฏ ูุชูุงูู ููุฎุทุท ุงูุชุตุญูุญูุฉ (CAPA) ูุชุถูู 5 ุฃูุณุงู ุฑุฆูุณูุฉ:

1. **ูุธุฑุฉ ุนุงูุฉ** - ุฅุญุตุงุฆูุงุช ุดุงููุฉ ููุคุดุฑุงุช ุงูุฃุฏุงุก
2. **ุชุชุจุน ุงูุชูุฏู** - ูุชุงุจุนุฉ ุญุงูุฉ ุงูุฅุฌุฑุงุกุงุช ุงูุชุตุญูุญูุฉ ูุงูููุงุฆูุฉ
3. **ุงูุฌุฏูู ุงูุฒููู** - ุนุฑุถ ุชุทูุฑ ุงูุฃุญุฏุงุซ ูุงูุฅุฌุฑุงุกุงุช ุนุจุฑ ุงูููุช
4. **ุงูุชูุจููุงุช** - ุฅุฏุงุฑุฉ ุงูุชูุจููุงุช ูุงูุฅุดุนุงุฑุงุช ุงููููุฉ
5. **ุงูุชูุงุฑูุฑ** - ุชูุงุฑูุฑ ููุตูุฉ ูุชุญูููุงุช ุงูุฃุฏุงุก

---

## ุงููุชุทูุจุงุช

- PostgreSQL 12+ (ูุซุจุช ูููุนุฏ)
- Python 3.8+ (ูููุณุฎุฉ Python ูู ุงูุณูุฑูุจุช)
- Bash shell (ูููุณุฎุฉ Shell ูู ุงูุณูุฑูุจุช)
- ุตูุงุญูุงุช ุงููุตูู ููุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ุฎุทูุงุช ุงูุชูุนูู

### ุงูุฎุทูุฉ 1: ุงูุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุชุฃูุฏ ูู ูุฌูุฏ ููู `backend/env.local` ูุญุชูู ุนูู:

```env
DATABASE_URL=postgresql://user:password@host:port/database_name
```

### ุงูุฎุทูุฉ 2: ุชุทุจูู Migration

ุงุฎุชุฑ ุฅุญุฏู ุงูุทุฑููุชูู:

#### ุงูุทุฑููุฉ ุงูุฃููู: ุจุงุณุชุฎุฏุงู Bash Script (ููุตู ุจู)

```bash
cd backend
chmod +x apply_capa_dashboard_migration.sh
./apply_capa_dashboard_migration.sh
```

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุจุงุณุชุฎุฏุงู Python Script

```bash
cd backend
python apply_capa_dashboard_migration.py
```

#### ุงูุทุฑููุฉ ุงูุซุงูุซุฉ: ูุฏููุงู ุจุงุณุชุฎุฏุงู psql

```bash
cd backend

# ุชุทุจูู schema migration
psql $DATABASE_URL -f migrations/add_capa_dashboard_tables.sql

# ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
psql $DATABASE_URL -f migrations/insert_sample_capa_data.sql
```

### ุงูุฎุทูุฉ 3: ุฅุนุงุฏุฉ ุชุดุบูู Backend Server

```bash
# ุฅุฐุง ูุงู Backend ูุนููุ ุฃูููู ุซู ุดุบูู ูู ุฌุฏูุฏ
cd backend
source .venv/bin/activate  # ุฃู .venv\Scripts\activate ูู Windows
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### ุงูุฎุทูุฉ 4: ูุชุญ ุงูุฏุงุดุจูุฑุฏ

1. ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู: `http://localhost:5173` (ุฃู ุนููุงู frontend)
2. ุณุฌู ุฏุฎูู ุจุญุณุงุจ ุงููุณุคูู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุถุบุท ุนูู "ุฏุงุดุจูุฑุฏ ุงูุฎุทุท"
4. ุณุชุธูุฑ ูู 5 ุฃูุณุงู ูู Sidebar ุงูุฃูุณุฑ

---

## ูุง ุงูุฐู ุชู ุฅุถุงูุชูุ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุชู ุฅูุดุงุก 3 ุฌุฏุงูู ุฌุฏูุฏุฉ:

- **`capa_actions`** - ูุชุฎุฒูู ุงูุฅุฌุฑุงุกุงุช ุงูุชุตุญูุญูุฉ ูุงูููุงุฆูุฉ ูุฎุทูุงุช ุงูุชุญูู
- **`timeline_events`** - ูุชุฎุฒูู ุฃุญุฏุงุซ ุงูุฌุฏูู ุงูุฒููู
- **`capa_alerts`** - ูุชุฎุฒูู ุงูุชูุจููุงุช ูุงูุฅุดุนุงุฑุงุช

ุชู ุฅูุดุงุก view ููุฅุญุตุงุฆูุงุช:

- **`capa_dashboard_stats`** - view ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุฏุงุดุจูุฑุฏ

### 2. Backend API Endpoints

ุชู ุฅุถุงูุฉ 7 endpoints ุฌุฏูุฏุฉ:

#### Dashboard Stats
- `GET /api/dashboard/stats/` - ุฅุญุตุงุฆูุงุช ุงูุฏุงุดุจูุฑุฏ ุงูุฑุฆูุณูุฉ
- `GET /api/dashboard/overdue/` - ุงูุฅุฌุฑุงุกุงุช ุงููุชุฃุฎุฑุฉ
- `GET /api/dashboard/upcoming/` - ุงูููุงุนูุฏ ุงููุงุฏูุฉ (ุฎูุงู 7 ุฃูุงู)

#### Actions
- `GET /api/actions/` - ุฌูุจ ุงูุฅุฌุฑุงุกุงุช (ูุน ููุงุชุฑ: capa_id, action_type, assigned_to_id)
- `PUT /api/actions/{action_id}` - ุชุญุฏูุซ ุญุงูุฉ ุฅุฌุฑุงุก

#### Timeline
- `GET /api/timeline/events/` - ุฃุญุฏุงุซ ุงูุฌุฏูู ุงูุฒููู (ูุน ููุงุชุฑ: capa_id, start_date, end_date)

#### Alerts
- `GET /api/alerts/` - ุงูุชูุจููุงุช (ูุน ููุงุชุฑ: user_id, filter_type, priority)
- `PUT /api/alerts/{alert_id}/read` - ุชุนููู ุงูุชูุจูู ูููุฑูุก

#### Reports
- `GET /api/reports/basic/` - ุงูุชูุงุฑูุฑ ุงูุฃุณุงุณูุฉ (ูุน ููุงุชุฑ: period, department_id, start_date, end_date)

### 3. ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

ุชู ุฅุฏุฑุงุฌ:
- **20 ุฎุทุฉ ุชุตุญูุญูุฉ** (CAPAs) ุจุญุงูุงุช ูุฃููููุงุช ูุชููุนุฉ
- **40+ ุฅุฌุฑุงุก** ุชุตุญูุญู ูููุงุฆู ูุฎุทูุงุช ุชุญูู
- **50+ ุญุฏุซ** ูู ุงูุฌุฏูู ุงูุฒููู
- **25+ ุชูุจูู** ุจุฃููููุงุช ูุฎุชููุฉ

ุชูุฒูุน ุงูุจูุงูุงุช:
- 2 ุฎุทุท ูุชุฃุฎุฑุฉ (Overdue)
- 6 ุฎุทุท ููุฏ ุงูุชูููุฐ (In Progress)
- 4 ุฎุทุท ูุนููุฉ (Pending)
- 3 ุฎุทุท ูู ูุฑุญูุฉ ุงูุชุญูู (Verification/Implemented)
- 2 ุฎุทุท ุชู ุงูุชุญูู ูููุง (Verified)
- 3 ุฎุทุท ูุบููุฉ (Closed)

---

## ุงูุฃูุณุงู ุงูุฎูุณุฉ ููุฏุงุดุจูุฑุฏ

### 1. ูุธุฑุฉ ุนุงูุฉ (Overview)

**ุงููุญุชูู:**
- ุฅุฌูุงูู ุงูุฎุทุท ุงูุชุตุญูุญูุฉ
- ุงูุฎุทุท ุงููุชุฃุฎุฑุฉ
- ุงูููุชููุฉ ูุฐุง ุงูุดูุฑ
- ุงูุญุฑุฌุฉ ุงููุนููุฉ
- ูุชูุณุท ููุช ุงูุฅูุฌุงุฒ
- ุงูุชูููุฑ ุงููุงูู

**ุงูุฑุณูู ุงูุจูุงููุฉ:**
- ุงูุฅุฌุฑุงุกุงุช ุงููุชุฃุฎุฑุฉ ุญุณุจ ุงูููุน
- ุงูููุงุนูุฏ ุงููุงุฏูุฉ
- ุชูุฒูุน ุงูุญุงูุงุช

### 2. ุชุชุจุน ุงูุชูุฏู (Progress Tracking)

**ุงููุญุชูู:**
- ูุงุฆูุฉ ุฌููุน ุงูุฅุฌุฑุงุกุงุช (ุชุตุญูุญูุฉ + ููุงุฆูุฉ + ุชุญูู)
- ููุงุชุฑ ูุชูุฏูุฉ:
  - ุญุณุจ CAPA ูุนููุฉ
  - ุญุณุจ ููุน ุงูุฅุฌุฑุงุก
  - ุญุณุจ ุงููุณุคูู
  - ุญุณุจ ุงูุญุงูุฉ
- ุดุฑูุท ุชูุฏู ููู ุฅุฌุฑุงุก
- ุฅููุงููุฉ ุชุญุฏูุซ ุญุงูุฉ ุงูุฅุฌุฑุงุกุงุช

**ุงูููุฒุงุช:**
- ุนุฑุถ ุงูุชูุงุตูู ุงููุงููุฉ ููู ุฅุฌุฑุงุก
- ุชุญุฏูุซ ุงูุญุงูุฉ (pending, in_progress, completed)
- ุชุญุฏูุซ ูุณุจุฉ ุงูุฅูุฌุงุฒ
- ุฅุถุงูุฉ ููุงุญุธุงุช

### 3. ุงูุฌุฏูู ุงูุฒููู (Timeline)

**ุงููุญุชูู:**
- ุนุฑุถ ุฒููู ูุฌููุน ุงูุฃุญุฏุงุซ
- ุฃููุงุน ุงูุฃุญุฏุงุซ:
  - ุฅูุดุงุก ุฎุทุฉ ุชุตุญูุญูุฉ
  - ุชุบููุฑ ุงูุญุงูุฉ
  - ุจุฏุก ุฅุฌุฑุงุก
  - ุฅูุฌุงุฒ ุฅุฌุฑุงุก
  - ุงูุชุญูู
  - ุฅุถุงูุฉ ุชุนูููุงุช

**ุงูููุงุชุฑ:**
- ุญุณุจ CAPA ูุนููุฉ
- ุญุณุจ ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ
- ุนุฑุถ ุฃุณุจูุนู/ุดูุฑู

### 4. ุงูุชูุจููุงุช (Alerts)

**ุงููุญุชูู:**
- ุชูุจููุงุช ุงูุฅุฌุฑุงุกุงุช ุงููุชุฃุฎุฑุฉ
- ุชูุจููุงุช ุงูููุงุนูุฏ ุงููุฑูุจุฉ
- ุชูุจููุงุช ุงูุชุตุนูุฏ
- ุชูุจููุงุช ุงูุฅูุฌุงุฒ
- ุชูุจููุงุช ุงููุธุงู

**ุงูููุงุชุฑ:**
- ุญุณุจ ููุน ุงูุชูุจูู
- ุญุณุจ ุงูุฃููููุฉ (critical, high, medium, low)
- ุงูููุฑูุกุฉ/ุบูุฑ ุงูููุฑูุกุฉ

**ุงูููุฒุงุช:**
- ุนุฑุถ ุนุฏุฏ ุงูุชูุจููุงุช ุบูุฑ ุงูููุฑูุกุฉ
- ุชุนููู ุงูุชูุจููุงุช ูููุฑูุกุฉ
- ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู 30 ุซุงููุฉ

### 5. ุงูุชูุงุฑูุฑ (Reports)

**ุงููุญุชูู:**
- ุฅุญุตุงุฆูุงุช ุฅุฌูุงููุฉ:
  - ุฅุฌูุงูู ุงูุฎุทุท
  - ุงูููุชููุฉ
  - ุงููุชุฃุฎุฑุฉ
  - ูุชูุณุท ููุช ุงูุฅูุฌุงุฒ
- ุชูุฒูุน ุญุณุจ ุงูุฃููููุฉ
- ุชูุฒูุน ุญุณุจ ุงูุญุงูุฉ
- ุฅุญุตุงุฆูุงุช ุงูุฃูุณุงู

**ุงูููุงุชุฑ:**
- ุญุณุจ ุงููุชุฑุฉ (ุฃุณุจูุน/ุดูุฑ/ุฑุจุน/ุณูุฉ)
- ุญุณุจ ุงููุณู
- ูุทุงู ุชุงุฑูุฎ ูุฎุตุต

---

## ุงุฎุชุจุงุฑ ุงูุฏุงุดุจูุฑุฏ

### 1. ุงูุชุญูู ูู ุงูุจูุงูุงุช

ุงูุชุญ ูู ูุณู ูู ุงูุฃูุณุงู ุงูุฎูุณุฉ ูุชุฃูุฏ ูู:

โ **ูุธุฑุฉ ุนุงูุฉ:**
- ุธููุฑ ุงูุฅุญุตุงุฆูุงุช (ูุฌุจ ุฃู ุชุธูุฑ 20 ุฎุทุฉ ุชุตุญูุญูุฉ)
- ุธููุฑ ุงูุฑุณูู ุงูุจูุงููุฉ
- ุธููุฑ ุงูุฅุฌุฑุงุกุงุช ุงููุชุฃุฎุฑุฉ (ูุฌุจ ุฃู ูููู ููุงู ุจุนุถ ุงููุชุฃุฎุฑุฉ)

โ **ุชุชุจุน ุงูุชูุฏู:**
- ุธููุฑ ูุงุฆูุฉ ุงูุฅุฌุฑุงุกุงุช (ูุฌุจ ุฃู ูููู ููุงู 40+ ุฅุฌุฑุงุก)
- ุนูู ุงูููุงุชุฑ
- ุฅููุงููุฉ ุชุญุฏูุซ ุงูุญุงูุฉ

โ **ุงูุฌุฏูู ุงูุฒููู:**
- ุธููุฑ ุงูุฃุญุฏุงุซ ูุฑุชุจุฉ ุฒูููุงู (ูุฌุจ ุฃู ูููู ููุงู 50+ ุญุฏุซ)
- ุนูู ุงูููุงุชุฑ ุงูุฒูููุฉ

โ **ุงูุชูุจููุงุช:**
- ุธููุฑ ุงูุชูุจููุงุช (ูุฌุจ ุฃู ูููู ููุงู 25+ ุชูุจูู)
- ุธููุฑ ุนุฏุฏ ุงูุชูุจููุงุช ุบูุฑ ุงูููุฑูุกุฉ
- ุฅููุงููุฉ ุชุนููู ุงูุชูุจููุงุช ูููุฑูุกุฉ

โ **ุงูุชูุงุฑูุฑ:**
- ุธููุฑ ุงูุฅุญุตุงุฆูุงุช
- ุธููุฑ ุชูุฒูุน ุงูุฃููููุงุช ูุงูุญุงูุงุช
- ุธููุฑ ุฅุญุตุงุฆูุงุช ุงูุฃูุณุงู

### 2. ุงุฎุชุจุงุฑ ุงููุธุงุฆู ุงูุชูุงุนููุฉ

- [ ] ุชุญุฏูุซ ุญุงูุฉ ุฅุฌุฑุงุก ูู "ุชุชุจุน ุงูุชูุฏู"
- [ ] ููุชุฑุฉ ุงูุฅุฌุฑุงุกุงุช ุญุณุจ CAPA
- [ ] ููุชุฑุฉ ุฃุญุฏุงุซ ุงูุฌุฏูู ุงูุฒููู ุญุณุจ ุงููุชุฑุฉ
- [ ] ุชุนููู ุชูุจูู ูููุฑูุก
- [ ] ุชุบููุฑ ุงููุชุฑุฉ ุงูุฒูููุฉ ูู ุงูุชูุงุฑูุฑ
- [ ] ููุชุฑุฉ ุงูุชูุงุฑูุฑ ุญุณุจ ุงููุณู

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุฃู ุจูุงูุงุช

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุทุจูู Migration ุจูุฌุงุญ
2. ุชุฃูุฏ ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
3. ุชุญูู ูู logs Backend:
   ```bash
   tail -f backend/server.log
   ```
4. ุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   SELECT COUNT(*) FROM capas;
   SELECT COUNT(*) FROM capa_actions;
   SELECT COUNT(*) FROM timeline_events;
   SELECT COUNT(*) FROM capa_alerts;
   ```

### ุงููุดููุฉ: ุฎุทุฃ 404 ุนูุฏ ุงููุตูู ููู endpoints

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู Backend ุจุนุฏ ุงูุชุญุฏูุซุงุช
2. ุชุญูู ูู ุฃู `main.py` ูุญุชูู ุนูู ุงูู endpoints ุงูุฌุฏูุฏุฉ
3. ุชุญูู ูู logs Backend ููุฃุฎุทุงุก

### ุงููุดููุฉ: ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL ุชุนูู
2. ุชุฃูุฏ ูู ุตุญุฉ `DATABASE_URL` ูู `env.local`
3. ุชุฃูุฏ ูู ูุฌูุฏ ุตูุงุญูุงุช ุงููุชุงุจุฉ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ููููู ูุญุงููุฉ ุชุทุจูู Migration ูุฏููุงู:
   ```bash
   psql $DATABASE_URL -f backend/migrations/add_capa_dashboard_tables.sql
   ```

### ุงููุดููุฉ: ุงูุตูุญุฉ ูุง ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ ูู ุตูุงุญูุงุช (super_admin ุฃู quality_manager)
2. ุงูุณุญ cache ุงููุชุตูุญ ูุฃุนุฏ ุงูุชุญููู (Ctrl+Shift+R)
3. ุชุญูู ูู Console ููุฃุฎุทุงุก

---

## ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
1. `backend/migrations/add_capa_dashboard_tables.sql` - Schema migration
2. `backend/migrations/insert_sample_capa_data.sql` - Sample data
3. `backend/apply_capa_dashboard_migration.sh` - Migration script (Bash)
4. `backend/apply_capa_dashboard_migration.py` - Migration script (Python)
5. `CAPA_DASHBOARD_ACTIVATION_README.md` - ูุฐุง ุงูููู

### ูููุงุช ูุนุฏูุฉ:
1. `backend/main.py` - ุฅุถุงูุฉ 7 API endpoints ุฌุฏูุฏุฉ
2. `src/App.tsx` - ุฅุถุงูุฉ route (ูุงู ููุฌูุฏุงู ูุณุจูุงู)
3. `src/components/AnimatedSidebar.tsx` - ุฅุถุงูุฉ menu item (ูุงู ููุฌูุฏุงู ูุณุจูุงู)

---

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุชุญูู ูู logs Backend: `backend/server.log`
2. ุชุญูู ูู Console ุงููุชุตูุญ (F12)
3. ุฑุงุฌุน ูุณู "ุงุณุชูุดุงู ุงูุฃุฎุทุงุก" ุฃุนูุงู
4. ุชุฃูุฏ ูู ุฃู ุฌููุน dependencies ูุซุจุชุฉ

---

## ุงูุฎูุงุตุฉ

โ ุชู ุฅูุดุงุก 3 ุฌุฏุงูู ุฌุฏูุฏุฉ + view
โ ุชู ุฅุถุงูุฉ 7 API endpoints
โ ุชู ุฅุฏุฑุงุฌ 20 CAPA + 40+ ุฅุฌุฑุงุก + 50+ ุญุฏุซ + 25+ ุชูุจูู
โ ุชู ุฑุจุท ุงูุตูุญุฉ ูู ุงูุชุทุจูู
โ ุงูุฏุงุดุจูุฑุฏ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

**ุงุณุชูุชุน ุจุงุณุชุฎุฏุงู ุฏุงุดุจูุฑุฏ ุงูุฎุทุท ุงูุชุตุญูุญูุฉ! ๐**

